<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AeroPulse - Full Flight Form</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body,html{width:100%;height:100%;background:linear-gradient(135deg,#0b0c10,#1a1a2e);color:#fff;overflow:hidden;}
#sidebar{width:80px;height:100vh;background:rgba(18,18,25,0.65);backdrop-filter:blur(20px);display:flex;flex-direction:column;align-items:center;padding:20px 0;position:fixed;left:0;top:0;z-index:1000;border-right:1px solid rgba(255,255,255,0.05);}
#sidebar .logo{font-size:20px;font-weight:700;color:#2ca1ff;margin-bottom:30px;}
.sidebar-btn{width:50px;height:50px;margin:12px 0;background:rgba(255,255,255,0.05);display:flex;justify-content:center;align-items:center;cursor:pointer;transition:all 0.25s;position:relative;}
.sidebar-btn:hover,.sidebar-btn.active{background:rgba(44,161,255,0.2);transform:scale(1.15);}
.sidebar-btn svg{width:24px;height:24px;fill:#bbb;transition:fill 0.25s;}
.sidebar-btn:hover svg,.sidebar-btn.active svg{fill:#2ca1ff;}
#map{position:absolute;top:0;left:80px;right:0;bottom:0;z-index:0;}
#formContainer{display:none;position:absolute;top:0;left:80px;width:calc(100% - 80px);height:100vh;background:rgba(18,18,28,0.65);backdrop-filter:blur(22px);padding:40px;overflow-y:auto;z-index:1000;}
#formContainer.show{display:block;animation:popWaterIn 0.35s cubic-bezier(0.25,1,0.5,1) forwards;}
#formContainer.hide{animation:popWaterOut 0.35s cubic-bezier(0.25,1,0.5,1) forwards;}
@keyframes popWaterIn{0%{opacity:0;transform:scale(0.8);}60%{opacity:1;transform:scale(1.05);}100%{transform:scale(1);}}
@keyframes popWaterOut{0%{opacity:1;transform:scale(1);}100%{opacity:0;transform:scale(0.8);display:none;}}
#flightForm{max-width:520px;margin:0 auto;background:rgba(30,30,40,0.7);padding:30px 40px;border-radius:4px;box-shadow:0 12px 30px rgba(0,0,0,0.5);backdrop-filter:blur(18px);}
#flightForm h2{text-align:center;color:#2ca1ff;font-weight:600;font-size:20px;margin-bottom:20px;}
#flightForm label{display:block;color:#ccc;margin-top:12px;font-size:14px;}
#flightForm input,#flightForm select{width:100%;padding:10px 12px;border:1px solid rgba(255,255,255,0.2);background:rgba(20,22,28,0.5);color:#fff;margin-top:6px;font-size:14px;transition:all 0.25s;}
#flightForm input:focus,#flightForm select:focus{border-color:#2ca1ff;box-shadow:0 0 10px rgba(44,161,255,0.3);outline:none;}
#flightForm button{width:100%;padding:12px;margin-top:20px;border:none;background:#2ca1ff;color:#fff;font-size:15px;font-weight:600;cursor:pointer;transition:0.25s, transform 0.2s;}
#flightForm button:hover{background:#1b8de0;transform:translateY(-2px);}
#ticket{margin-top:20px;background:rgba(20,22,28,0.8);padding:20px;color:#fff;border-left:4px solid #2ca1ff;display:none;font-size:14px;}
#formContainer::-webkit-scrollbar{width:10px;}
#formContainer::-webkit-scrollbar-thumb{background:rgba(100,100,100,0.4);}
#formContainer::-webkit-scrollbar-thumb:hover{background:rgba(180,180,180,0.5);}
</style>
</head>
<body>

<div id="sidebar">
  <div class="logo">Aero</div>
  <div class="sidebar-btn" id="homeBtn"><svg viewBox="0 0 24 24"><path d="M3 11L12 2l9 9v11a1 1 0 0 1-1 1h-6v-6h-4v6H4a1 1 0 0 1-1-1V11z"/></svg></div>
  <div class="sidebar-btn" id="newFlightBtn"><svg viewBox="0 0 24 24"><path d="M2.5 19.5l19-7-19-7v4l14 3-14 3v4z"/></svg></div>
</div>

<div id="map"></div>

<div id="formContainer">
<form id="flightForm">
  <h2>New Flight Plan</h2>
  <label>Departure Airport</label>
  <input type="text" id="departure" placeholder="e.g. JFK" required>
  <label>Arrival Airport</label>
  <input type="text" id="arrival" placeholder="e.g. LAX" required>
  <label>Callsign</label>
  <input type="text" id="callsign" placeholder="Flight number" required>
<label for="aircraft">Select Aircraft</label>
<select id="aircraft">
  <!-- ✈️ AIRBUS -->
  <option value="A220-100">Airbus A220-100</option>
  <option value="A220-300">Airbus A220-300</option>
  <option value="A318">Airbus A318</option>
  <option value="A319">Airbus A319</option>
  <option value="A320">Airbus A320</option>
  <option value="A320neo">Airbus A320neo</option>
  <option value="A321">Airbus A321</option>
  <option value="A321neo">Airbus A321neo</option>
  <option value="A330-200">Airbus A330-200</option>
  <option value="A330-300">Airbus A330-300</option>
  <option value="A330neo">Airbus A330neo</option>
  <option value="A340-300">Airbus A340-300</option>
  <option value="A340-600">Airbus A340-600</option>
  <option value="A350-900">Airbus A350-900</option>
  <option value="A350-1000">Airbus A350-1000</option>
  <option value="A380-800">Airbus A380-800</option>

  <!-- ✈️ BOEING -->
  <option value="B707">Boeing 707</option>
  <option value="B717">Boeing 717</option>
  <option value="B727">Boeing 727</option>
  <option value="B737-700">Boeing 737-700</option>
  <option value="B737-800">Boeing 737-800</option>
  <option value="B737-MAX8">Boeing 737 MAX 8</option>
  <option value="B747-400">Boeing 747-400</option>
  <option value="B747-8">Boeing 747-8</option>
  <option value="B757-200">Boeing 757-200</option>
  <option value="B757-300">Boeing 757-300</option>
  <option value="B767-300ER">Boeing 767-300ER</option>
  <option value="B777-200LR">Boeing 777-200LR</option>
  <option value="B777-300ER">Boeing 777-300ER</option>
  <option value="B777X">Boeing 777X</option>
  <option value="B787-8">Boeing 787-8 Dreamliner</option>
  <option value="B787-9">Boeing 787-9 Dreamliner</option>
  <option value="B787-10">Boeing 787-10 Dreamliner</option>

  <!-- ✈️ EMBRAER -->
  <option value="E170">Embraer E170</option>
  <option value="E175">Embraer E175</option>
  <option value="E190">Embraer E190</option>
  <option value="E195-E2">Embraer E195-E2</option>

  <!-- ✈️ BOMBARDIER -->
  <option value="CRJ200">Bombardier CRJ200</option>
  <option value="CRJ700">Bombardier CRJ700</option>
  <option value="CRJ900">Bombardier CRJ900</option>
  <option value="CRJ1000">Bombardier CRJ1000</option>
  <option value="Global7500">Bombardier Global 7500</option>

  <!-- ✈️ ATR -->
  <option value="ATR42-600">ATR 42-600</option>
  <option value="ATR72-600">ATR 72-600</option>

  <!-- ✈️ CESSNA -->
  <option value="C172">Cessna 172 Skyhawk</option>
  <option value="C208">Cessna 208 Caravan</option>
  <option value="C525">Cessna CitationJet CJ2+</option>
  <option value="C750">Cessna Citation X</option>

  <!-- ✈️ GULFSTREAM -->
  <option value="G500">Gulfstream G500</option>
  <option value="G650ER">Gulfstream G650ER</option>
  <option value="G700">Gulfstream G700</option>

  <!-- ✈️ DASSAULT -->
  <option value="Falcon7X">Dassault Falcon 7X</option>
  <option value="Falcon8X">Dassault Falcon 8X</option>
  <option value="Falcon10X">Dassault Falcon 10X</option>

  <!-- ✈️ SUKHOI & COMAC -->
  <option value="SSJ100">Sukhoi Superjet 100</option>
  <option value="C919">COMAC C919</option>
  <option value="ARJ21">COMAC ARJ21</option>
</select>
  <button type="submit">Load Flight</button>
  <div id="ticket"></div>
</form>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map = L.map('map',{minZoom:3,maxZoom:15,zoomControl:true}).setView([20,0],2);
L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',{
  attribution:'&copy; OpenStreetMap, CARTO', subdomains:'abcd', maxZoom:19
}).addTo(map);

const airports = {
"ATL": [33.6407, -84.4277],
  "DFW": [32.8998, -97.0403],
  "DEN": [39.8561, -104.6737],
  "ORD": [41.9742, -87.9073],
};

let flightLayer=null;
document.getElementById('flightForm').addEventListener('submit', e=>{
  e.preventDefault();
  const dep=document.getElementById('departure').value.toUpperCase();
  const arr=document.getElementById('arrival').value.toUpperCase();
  const callsign=document.getElementById('callsign').value.toUpperCase();
  const aircraft=document.getElementById('aircraft').selectedOptions[0].text;
  if(!airports[dep]||!airports[arr]) return alert("Airport not found!");
  const depPos=airports[dep], arrPos=airports[arr];
  if(flightLayer) map.removeLayer(flightLayer);
  function greatCircle(start,end,steps=200){
    const coords=[];
    const [lat1,lon1]=start.map(d=>d*Math.PI/180);
    const [lat2,lon2]=end.map(d=>d*Math.PI/180);
    const d=2*Math.asin(Math.sqrt(Math.sin((lat2-lat1)/2)**2+Math.cos(lat1)*Math.cos(lat2)*Math.sin((lon2-lon1)/2)**2));
    for(let i=0;i<=steps;i++){
      const f=i/steps;
      const A=Math.sin((1-f)*d)/Math.sin(d);
      const B=Math.sin(f*d)/Math.sin(d);
      const x=A*Math.cos(lat1)*Math.cos(lon1)+B*Math.cos(lat2)*Math.cos(lon2);
      const y=A*Math.cos(lat1)*Math.sin(lon1)+B*Math.cos(lat2)*Math.sin(lon2);
      const z=A*Math.sin(lat1)+B*Math.sin(lat2);
      const lat=Math.atan2(z,Math.sqrt(x*x+y*y));
      const lon=Math.atan2(y,x);
      coords.push([lat*180/Math.PI,lon*180/Math.PI]);
    }
    return coords;
  }
  const route=greatCircle(depPos,arrPos);
  flightLayer=L.polyline(route,{color:'#8a2be2',weight:2.2,opacity:0.8,dashArray:'4,8'}).addTo(map);
});
</script>

</body>
</html>

