<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AeroPulse - Glassy Symbol Edition</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
/* üåå Reset */
* {margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body, html {width:100%;height:100%;background:#0d0f14;color:#fff;overflow:hidden;}

/* üåü Glassy sidebar */
#sidebar {
    width:80px; height:100vh;
    background: rgba(20,22,28,0.6);
    backdrop-filter: blur(15px);
    display:flex;flex-direction:column;align-items:center;padding:20px 0;
    position:fixed;left:0;top:0;z-index:1000;
    border-right:1px solid rgba(255,255,255,0.1);
    transition: all 0.3s ease;
}

#sidebar .logo {
    font-size:24px;font-weight:700;color:#2ca1ff;margin-bottom:30px;text-align:center;
    letter-spacing:2px;
}

/* Sidebar buttons - symbol only */
#sidebar button {
    width:50px;height:50px;margin:12px 0;
    background: rgba(255,255,255,0.05);
    border:none;border-radius:12px;
    font-size:28px; /* symbol */
    color:#bbb;
    display:flex;justify-content:center;align-items:center;
    cursor:pointer;
    transition: all 0.25s ease, transform 0.3s ease;
    position:relative;
    overflow:hidden;
}

#sidebar button.active, #sidebar button:hover {
    background: rgba(44,161,255,0.2);
    color:#2ca1ff;
    transform: scale(1.2);
}

/* üíß Pop-up glassy animation */
#formContainer {
    display:none;
    position:absolute;
    top:0;left:80px;
    width:calc(100% - 80px);
    height:100vh;
    background: rgba(18,20,28,0.6);
    backdrop-filter: blur(18px);
    padding:40px;
    overflow-y:auto;
    z-index:1000;
}

#formContainer.show {
    animation: popWater 0.35s ease forwards;
}

@keyframes popWater {
    0% {opacity:0; transform:scale(0.8);}
    60% {opacity:1; transform:scale(1.05);}
    100% {transform:scale(1);}
}

/* ‚úàÔ∏è Flight Form */
#flightForm {
    max-width:480px; margin:0 auto;
    background: rgba(30,30,40,0.7);
    padding:30px 40px; border-radius:20px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.5);
    backdrop-filter: blur(18px);
}

#flightForm h2 {
    text-align:center;color:#2ca1ff;font-weight:600;font-size:20px;margin-bottom:20px;
}

#flightForm label {
    display:block;color:#ccc;margin-top:12px;font-size:14px;
}

#flightForm input {
    width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.2);
    background: rgba(20,22,28,0.5);color:#fff;margin-top:6px;font-size:14px;
    transition:0.25s ease;
}

#flightForm input:focus {border-color:#2ca1ff;box-shadow:0 0 10px rgba(44,161,255,0.3);outline:none;}

#flightForm button {
    width:100%;padding:12px;margin-top:20px;border:none;border-radius:12px;
    background:#2ca1ff;color:#fff;font-size:15px;font-weight:600;cursor:pointer;
    transition:0.25s ease, transform 0.2s;
}

#flightForm button:hover {background:#1b8de0;transform:translateY(-2px);}

/* üó∫Ô∏è Map */
#map {position:absolute;top:0;left:80px;right:0;bottom:0;z-index:0;}

/* üåÄ Scrollbar glassy */
#formContainer::-webkit-scrollbar {width:10px;}
#formContainer::-webkit-scrollbar-thumb {background:rgba(100,100,100,0.4);border-radius:8px;}
#formContainer::-webkit-scrollbar-thumb:hover {background:rgba(180,180,180,0.5);}
</style>
</head>
<body>

<!-- Sidebar -->
<div id="sidebar">
    <div class="logo">Aero</div>
    <!-- Symbol-based navigation -->
    <button id="homeBtn" title="Home">‚åÇ</button>
    <button id="newFlightBtn" title="New Flight">‚úàÔ∏é</button>
    <button id="trafficBtn" title="Traffic">‚óè</button>
</div>

<!-- Map -->
<div id="map"></div>

<!-- Glassy pop-up -->
<div id="formContainer">
    <form id="flightForm">
        <h2>Upload Flight Plan</h2>
        <label>Flight Plan JSON</label>
        <input type="file" id="flightFile" accept=".json" required>
        <button type="submit">Load Flight</button>
    </form>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ===== Map setup =====
const map = L.map('map',{minZoom:3,maxZoom:15,zoomControl:true}).setView([10,105],5);
L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{
    attribution:'&copy; OpenStreetMap, CARTO', subdomains:'abcd', maxZoom:19
}).addTo(map);

// ===== Flight plan =====
let flightLayer = null;
document.getElementById('flightForm').addEventListener('submit', async e=>{
    e.preventDefault();
    const file = document.getElementById('flightFile').files[0];
    if(!file) return alert("Select JSON");
    const content = await file.text();
    const plan = JSON.parse(content);
    if(!plan.route||plan.route.length<2) return alert("Need 2+ coordinates");
    if(flightLayer) map.removeLayer(flightLayer);
    flightLayer = L.polyline(plan.route,{color:'#2ca1ff',weight:4,opacity:0.9,dashArray:'8,6'}).addTo(map);
    flightLayer.bindPopup(`<b>Flight:</b>${plan.flightNumber||'N/A'}<br><b>Aircraft:</b>${plan.aircraft||'N/A'}<br><b>Airline:</b>${plan.airline||'N/A'}`);
    map.fitBounds(flightLayer.getBounds(), {padding:[50,50], maxZoom:10});
});

// ===== Sidebar buttons =====
const formContainer = document.getElementById('formContainer');
document.getElementById('newFlightBtn').addEventListener('click', ()=>{
    formContainer.classList.add('show');
    formContainer.style.display = 'block';
});
document.getElementById('homeBtn').addEventListener('click', ()=>{
    formContainer.style.display = 'none';
    formContainer.classList.remove('show');
});
document.getElementById('trafficBtn').addEventListener('click', ()=>{
    formContainer.style.display = 'none';
    formContainer.classList.remove('show');
});
</script>
</body>
</html>
